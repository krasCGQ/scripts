# shellcheck shell=bash
# Treewide environment setup
# Copyright (C) 2017-2019 Albert I (krasCGQ)
# SPDX-License-Identifier: GPL-3.0-or-later

# Text styles
BLD=$(tput bold)
RST=$(tput sgr0)
# Export variables to satisfy shellcheck requirements
export SCRIPTDIR BLD RST

# Prints a message with a dash
info() {
    echo "- $1"
    while [[ $# -ge 2 ]]; do
        echo "  $2"
        shift
    done
}

# Prints a message with an exclamation point
warn() {
    echo "! $1" >&2
    while [[ $# -ge 2 ]]; do
        echo "  $2" >&2
        shift
    done
}

# Making sure user has sudo before executing command
check_sudo() {
    info "Checking for sudo; please enter password if prompted."
    if ! sudo -v 2>/dev/null; then
        warn "Current user isn't a sudoer!"
        return 1
    fi

    # Prevent falsely returning non-zero status
    if [[ $# != 0 ]]; then sudo "$@"; fi
}
